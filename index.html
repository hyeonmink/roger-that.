<!DOCTYPE html>
<html lang="en">

<!-- 
    Link to Vincent's project: http://students.washington.edu/wuv21/info474/voting-sys-vis/
    Link to Vincent's Code: https://github.com/wuv21/voting-sys-vis/blob/master/js/PebbleChart.js

    Next steps: probably problem with data joining - either in main file when first join data or in peopleChart.js.
    Should probably follow the code to see where svgâ€™s are appended and ensure that .data or .datum is used correctly
--> 



<head>
    <meta charset="utf-8">
    <title>D3: Empty page template</title>
    <script src="https://d3js.org/d3.v4.js"></script>
    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
        }
    </style>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src='./js/PeopleChart.js'></script>


    <script type='text/javascript'>
        $(function () {
            d3.csv('./data/data_light.csv', function (data) {

                var nest = d3.nest()
                    .key(function (d) {
                        return d.country_txt;
                    })
                
                var nestedData = nest.entries(data)
                var pChart = PeopleChart()
                // console.log(nestedData)
                // var x = [];
                // x.push(nestedData);

                var charts = d3.select('#vis')
                    .datum(data)

                charts.enter().append("div")
                    .attr('class', 'chart')
                    .merge(charts)
                    .call(pChart);

                charts.exit().remove();


                // var chartWrapper = d3.select('#vis')
                //     .data(nestedData) // a one element array containing your data array
                //     .call(chart); // call the chart function!
            });
        });
    </script>
</head>

<body>

    <div id='vis'>
    </div>
</body>

</html>